{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst API_KEY = \"46878404-43e11e495eedf0f56c253a7d9\";\nconst API_URL = \"https://pixabay.com/api/\";\n\nexport function fetchData(inputValue) {\n\n    const randomPage = Math.floor(Math.random() * 10) + 1;\n\n    const options = new URLSearchParams({\n        key: API_KEY,\n        q: inputValue,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: randomPage,\n        per_page: 15\n    });\n\n    const urlWithParams = `${API_URL}?${options.toString()}`;\n\n    return fetch(urlWithParams)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(\"...UPS\");\n            }\n            return res.json();\n        })\n        .then(data => {\n            console.log(data);\n\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: \"Sorry, no images were found for your request. Try again!\",\n                    position: 'topCenter',\n                    backgroundColor: '#ef4040',\n                });\n                return [];\n            }\n            return data.hits;\n        })\n        .catch(err => {\n            console.log(err);\n\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while receiving data. Try again.',\n                position: 'topCenter',\n                backgroundColor: '#ef4040',\n            });\n        });\n}\n","const list = document.querySelector(\".list\");\n\nexport function formResults(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n            </a>\n            <div class=\"info\">\n                <p class=\"info-text\"><b class=\"xz\">Likes:</b> ${likes}</p>\n                <p class=\"info-text\"><b class=\"xz\">Views:</b> ${views}</p>\n                <p class=\"info-text\"><b class=\"xz\">Comments:</b> ${comments}</p>\n                <p class=\"info-text\"><b class=\"xz\">Downloads:</b> ${downloads}</p>\n            </div>\n        </div>\n    `).join(\"\");\n\n    list.innerHTML = \"\";\n    list.insertAdjacentHTML(\"beforeend\", markup);\n}\n","import { fetchData } from \"./js/pixabay-api\";\nimport { formResults } from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector(\".search-form\");\nconst inputText = document.querySelector(\".search-form input\");\nconst loader = document.querySelector(\".loader\");\nlet lightbox;\n\nsearchForm.addEventListener(\"submit\", handleForm);\n\nfunction handleForm(event) {\n    event.preventDefault();\n    console.log(\"It works or not\");\n\n    const inputValue = inputText.value.trim();\n    console.log(inputValue);\n\n    if (inputValue === \"\") {\n        return iziToast.info({\n            position: 'topRight',\n            title: 'Error',\n            message: 'Fill in the request field',\n        });\n    }\n\n    showLoader();\n\n    fetchData(inputValue)\n        .then(res => {\n            if (res && res.length > 0) {\n\n                formResults(res);\n                if (lightbox) {\n                    lightbox.refresh();\n                } else {\n                    lightbox = new SimpleLightbox('.gallery-item a', {\n                        captionsData: 'alt',\n                        captionDelay: 250,\n                    });\n                }\n            }\n        })\n\n        .catch(error => {\n            console.log(error);\n\n            iziToast.error({\n                position: 'topRight',\n                title: 'Error',\n                message: 'An error occurred while retrieving images. Try again!',\n                backgroundColor: '#ef4040',\n\n            });\n        })\n\n        .finally(() => {\n            hideLoader();\n            searchForm.reset();\n        });\n}\n\nfunction showLoader() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n    loader.style.display = \"none\";\n}"],"names":["API_KEY","API_URL","fetchData","inputValue","randomPage","options","urlWithParams","res","data","iziToast","err","list","formResults","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","inputText","loader","lightbox","handleForm","event","showLoader","SimpleLightbox","error","hideLoader"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAU,2BAET,SAASC,EAAUC,EAAY,CAElC,MAAMC,EAAa,KAAK,MAAM,KAAK,SAAW,EAAE,EAAI,EAE9CC,EAAU,IAAI,gBAAgB,CAChC,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,CAAK,EAEKE,EAAgB,GAAGL,CAAO,IAAII,EAAQ,SAAU,CAAA,GAEtD,OAAO,MAAMC,CAAa,EACrB,KAAKC,GAAO,CACT,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAM,QAAQ,EAE5B,OAAOA,EAAI,MACvB,CAAS,EACA,KAAKC,IACF,QAAQ,IAAIA,CAAI,EAEZA,EAAK,KAAK,SAAW,GACrBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2DACT,SAAU,YACV,gBAAiB,SACrC,CAAiB,EACM,IAEJD,EAAK,KACf,EACA,MAAME,GAAO,CACV,QAAQ,IAAIA,CAAG,EAEfD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qDACT,SAAU,YACV,gBAAiB,SACjC,CAAa,CACb,CAAS,CACT,CCpDA,MAAME,EAAO,SAAS,cAAc,OAAO,EAEpC,SAASC,EAAYC,EAAQ,CAChC,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,uBAErFL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,gEAGUC,CAAK;AAAA,gEACLC,CAAK;AAAA,mEACFC,CAAQ;AAAA,oEACPC,CAAS;AAAA;AAAA;AAAA,KAGxE,EAAE,KAAK,EAAE,EAEVV,EAAK,UAAY,GACjBA,EAAK,mBAAmB,YAAaG,CAAM,CAC/C,CCVA,MAAMQ,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAEJH,EAAW,iBAAiB,SAAUI,CAAU,EAEhD,SAASA,EAAWC,EAAO,CACvBA,EAAM,eAAc,EACpB,QAAQ,IAAI,iBAAiB,EAE7B,MAAMxB,EAAaoB,EAAU,MAAM,KAAI,EAGvC,GAFA,QAAQ,IAAIpB,CAAU,EAElBA,IAAe,GACf,OAAOM,EAAS,KAAK,CACjB,SAAU,WACV,MAAO,QACP,QAAS,2BACrB,CAAS,EAGLmB,IAEA1B,EAAUC,CAAU,EACf,KAAKI,GAAO,CACLA,GAAOA,EAAI,OAAS,IAEpBK,EAAYL,CAAG,EACXkB,EACAA,EAAS,QAAO,EAEhBA,EAAW,IAAII,EAAe,kBAAmB,CAC7C,aAAc,MACd,aAAc,GACtC,CAAqB,EAGrB,CAAS,EAEA,MAAMC,GAAS,CACZ,QAAQ,IAAIA,CAAK,EAEjBrB,EAAS,MAAM,CACX,SAAU,WACV,MAAO,QACP,QAAS,wDACT,gBAAiB,SAEjC,CAAa,CACb,CAAS,EAEA,QAAQ,IAAM,CACXsB,IACAT,EAAW,MAAK,CAC5B,CAAS,CACT,CAEA,SAASM,GAAa,CAClBJ,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASO,GAAa,CAClBP,EAAO,MAAM,QAAU,MAC3B"}